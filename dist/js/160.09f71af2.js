"use strict";(self["webpackChunkarvan"]=self["webpackChunkarvan"]||[]).push([[160],{7137:function(e,t,l){l.d(t,{Z:function(){return g}});var s=l(3396),a=l(7139);const o={class:"p-3 header-article"},n={class:"d-flex"},i=(0,s._)("button",{type:"button",class:"navbar-toggler btn blue me-auto px-4 d-lg-none","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasDarkNavbar","aria-controls":"offcanvasDarkNavbar"},"post",-1),r={class:"d-lg-flex align-items-center"},c=(0,s._)("h1",{class:"text-22 pe-3 text-white",title:"Arvan challenge"}," Arvan Challenge ",-1);function d(e,t,l,d,u,h){return(0,s.wg)(),(0,s.iD)("header",o,[(0,s._)("div",null,[(0,s._)("div",n,[i,(0,s._)("div",r,[c,(0,s._)("span",null,(0,a.zw)(u.username),1)]),(0,s._)("button",{type:"button",class:"btn btn-outline-info ms-auto me-2",onClick:t[0]||(t[0]=(...e)=>h.handleLogout&&h.handleLogout(...e))},"Logout")])])])}l(7658);var u={data(){return{username:""}},created(){const e=localStorage.getItem("username");this.username=e},methods:{handleLogout(){localStorage.clear(),this.$router.push("/#")}}},h=l(89);const p=(0,h.Z)(u,[["render",d]]);var g=p},2520:function(e,t,l){l.d(t,{Z:function(){return g}});var s=l(3396);const a={class:"d-none col-lg-2 blue d-lg-flex flex-column"},o=(0,s._)("h5",{class:"p-3"},"post",-1),n={class:"d-flex flex-column"},i={class:"offcanvas offcanvas-start blue w-50 flex-column",tabindex:"-1",id:"offcanvasDarkNavbar","aria-labelledby":"offcanvasDarkNavbarLabel"},r=(0,s._)("h5",{class:"p-3"},"post",-1),c={class:"d-flex flex-column"};function d(e,t){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",a,[(0,s._)("div",null,[o,(0,s._)("div",n,[(0,s.Wm)(l,{to:"/",class:"sidebar-items py-1 text-white ps-4"},{default:(0,s.w5)((()=>[(0,s.Uk)("All Articles")])),_:1}),(0,s.Wm)(l,{to:"newArticlePage",class:"sidebar-items py-1 text-white ps-4"},{default:(0,s.w5)((()=>[(0,s.Uk)("New Articles")])),_:1})])])]),(0,s._)("div",i,[(0,s._)("div",null,[r,(0,s._)("div",c,[(0,s.Wm)(l,{to:"/",class:"sidebar-items py-1 text-white ps-4"},{default:(0,s.w5)((()=>[(0,s.Uk)("All Articles")])),_:1}),(0,s.Wm)(l,{to:"newArticlePage",class:"sidebar-items py-1 text-white ps-4"},{default:(0,s.w5)((()=>[(0,s.Uk)("New Articles")])),_:1})])])])],64)}var u=l(89);const h={},p=(0,u.Z)(h,[["render",d]]);var g=p},160:function(e,t,l){l.r(t),l.d(t,{default:function(){return R}});var s=l(3396),a=l(7139);const o={class:"body-container vh-100 grid"},n={style:{"min-height":"700px"},class:"d-flex"},i={class:"form-articles col-12 col-lg-10"},r=(0,s._)("h2",null,"All Posts",-1),c={class:"table-responsive my-4 overflw-x-auto position-relative d-flex flex-column align-items-center"},d={class:"table"},u=(0,s._)("colgroup",null,[(0,s._)("col"),(0,s._)("col"),(0,s._)("col"),(0,s._)("col"),(0,s._)("col",{class:"col-2"}),(0,s._)("col",{class:"col-2"})],-1),h=(0,s._)("thead",null,[(0,s._)("tr",{class:"headOfList"},[(0,s._)("th",{scope:"col"},"#"),(0,s._)("th",{scope:"col"},"Title"),(0,s._)("th",{scope:"col"},"Author"),(0,s._)("th",{scope:"col"},"Tags"),(0,s._)("th",{scope:"col"},"Excerpt"),(0,s._)("th",{scope:"col"},"Created")])],-1),p={class:"pagination btn-group me-2",role:"group","aria-label":"First group"},g=["disabled"],b=["onClick"],m=["disabled"];function w(e,t,l,w,_,v){const f=(0,s.up)("responsive-header"),A=(0,s.up)("sideBar"),x=(0,s.up)("allPoststable");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s.Wm)(f),(0,s._)("section",n,[(0,s.Wm)(A),(0,s._)("div",i,[r,(0,s._)("div",c,[(0,s._)("table",d,[u,h,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(v.paginatedArticles,((e,t)=>((0,s.wg)(),(0,s.j4)(x,{onDeletedArticle:v.handleArticleDeleted,key:t,shownAriticle:e},null,8,["onDeletedArticle","shownAriticle"])))),128))]),(0,s._)("div",p,[(0,s._)("button",{onClick:t[0]||(t[0]=e=>_.currentPage--),disabled:1===_.currentPage,class:"previousPageBtn btn btn-outline-secondary btn-white"},"<",8,g),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(v.totalPages,(e=>((0,s.wg)(),(0,s.iD)("button",{key:e,onClick:t=>_.currentPage=e,class:"pageNumberBtn btn btn-outline-secondary"},(0,a.zw)(e),9,b)))),128)),(0,s._)("button",{onClick:t[1]||(t[1]=e=>_.currentPage++),disabled:_.currentPage===v.totalPages,class:"nextPageBtn btn btn-outline-secondary btn-white"},">",8,m)])])])])])}l(7658);var _=l(7137),v=l(2520);const f={class:"bodyOfList"},A={scope:"row"},x={class:"d-md-flex"},y={class:"me-1"},k={class:"d-inline-block"},D=(0,s._)("span",null,"...",-1),C=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",fill:"currentColor",class:"bi bi-caret-down-fill ms-xl-2",viewBox:"0 0 16 16"},[(0,s._)("path",{d:"M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"})],-1),P=[D,C],z=(0,s._)("span",null,"Edit",-1),L=[z],Z=(0,s._)("div",{"data-bs-toggle":"modal","data-bs-target":"#exampleModal",class:"px-2 py-1"},[(0,s._)("span",{style:{cursor:"pointer"}},"Delete")],-1),$={class:"modal fade modal-centered",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},B={class:"modal-dialog modal-dialog-centered"},E={class:"modal-content"},M=(0,s._)("div",{class:"modal-header"},[(0,s._)("h1",{class:"modal-title fs-5 fw-bold",id:"exampleModalLabel"},"Delet article"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),N=(0,s._)("div",{class:"modal-body"}," Are you sure to delet article ",-1),W={class:"modal-footer"},H=(0,s._)("button",{type:"button",class:"btn btn-light","data-bs-dismiss":"modal"},"No",-1);function O(e,t,l,o,n,i){return(0,s.wg)(),(0,s.iD)("tbody",f,[(0,s._)("tr",null,[(0,s._)("th",A,(0,a.zw)(l.shownAriticle.id),1),(0,s._)("td",null,(0,a.zw)(l.shownAriticle.title),1),(0,s._)("td",null,(0,a.zw)(l.shownAriticle.author),1),(0,s._)("td",null,(0,a.zw)(l.shownAriticle.tags),1),(0,s._)("td",null,(0,a.zw)(l.shownAriticle.excerpt),1),(0,s._)("td",null,[(0,s._)("div",x,[(0,s._)("span",y,(0,a.zw)(l.shownAriticle.date),1),(0,s._)("div",k,[(0,s._)("button",{onClick:t[0]||(t[0]=(...e)=>i.showDropdown&&i.showDropdown(...e)),class:"btn blue-sky text-white"},P),(0,s._)("div",{class:(0,a.C_)([{"d-none":!n.isactive},"edit-delet-dropdown position-absolute z-1 border border-secondary-subtle rounded-1 bg-white"])},[(0,s._)("div",{onClick:t[1]||(t[1]=(...e)=>i.loginOrEditpage&&i.loginOrEditpage(...e)),class:"p-2 pb-1 border-bottom",style:{cursor:"pointer"}},L),Z],2)])])])]),(0,s._)("div",$,[(0,s._)("div",B,[(0,s._)("div",E,[M,N,(0,s._)("div",W,[H,(0,s._)("button",{onClick:t[2]||(t[2]=(...e)=>i.deleteArticle&&i.deleteArticle(...e)),type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Yes")])])])])])}var S=l(1120),U=l(4677),Y={data(){return{deletdArticle:""}},props:{shownAriticle:Object},setup(e){const t=(0,U.pm)();return{toast:t}},data(){return{isactive:!1}},mounted(){document.addEventListener("click",this.handleDocumentClick)},methods:{showDropdown(){this.isactive=!this.isactive,this.deletedArticle=this.shownAriticle.slug},handleDocumentClick(e){this.$el.contains(e.target)||(this.isactive=!1)},loginOrEditpage(){const e=localStorage.getItem("username");this.shownAriticle.author===e?S.Z.push(`/editArticlePage/${this.shownAriticle.slug}`):this.toast.error("you can only edit your article")},deleteArticle(){this.$emit("deletedArticle",this.deletedArticle),this.handleDocumentClick(Event)}}},I=l(89);const j=(0,I.Z)(Y,[["render",O]]);var q=j,T=l(4161),F={name:"HomeView",components:{responsiveHeader:_.Z,sideBar:v.Z,allPoststable:q},setup(){const e=(0,U.pm)();return{toast:e}},data(){return{shownArticles:[],currentPage:1}},mounted(){T.Z.get("https://api.realworld.io/api/articles",{params:{limit:34},headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{const t=e.data.articles;let l=this.shownArticles.length+1;t.forEach((e=>{var t=new Date(e.createdAt),s=t.getFullYear(),a=t.getMonth()+1,o=t.getDate();const n={id:l,title:e.title,author:e.author.username,tags:e.tagList.toString(),excerpt:e.description.slice(0,20),date:`${s}-${a}-${o}`,slug:e.slug};this.shownArticles.push(n),l++}))})).catch((e=>{console.log(e)}))},computed:{loginUsername(){return this.$route.query.username},totalPages(){return Math.ceil(this.shownArticles.length/8)},paginatedArticles(){const e=8*(this.currentPage-1),t=e+8;return this.shownArticles.slice(e,t)}},methods:{handleArticleDeleted(e){T.Z["delete"](`https://api.realworld.io/api/articles/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((t=>{this.shownArticles=this.shownArticles.filter((t=>t.slug!==e)),this.toast.success("Article deleted successfuly")})).catch((e=>{console.log(e),this.toast.error("you can only delet your article")}))}}};const K=(0,I.Z)(F,[["render",w]]);var R=K}}]);
//# sourceMappingURL=160.09f71af2.js.map